<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>88마켓 - 공지사항</title>
<!-- 공지사항 CSS -->
<link rel="stylesheet" th:href="@{/css/user/search.css}">
<!-- 외부파일(jQuery, bootstrep 등 -->
<th:block th:replace="~{components/user/external :: external}"></th:block>

<script>
	$(function() {

	});
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.wish-btn').forEach(function (btn) {
      btn.addEventListener('click', function (event) {
        event.preventDefault();        // 링크 이동 막기
        event.stopPropagation();      // 상위 <a> 클릭 이벤트 막기

        // 하트 색 토글
        btn.classList.toggle('active');

        // btn 내부의 img 태그 찾기
        const img = btn.querySelector('img');
        if (btn.classList.contains('active')) {
          img.src = '/images/productHeart/heart-on.png';   // 활성 하트 이미지
        } else {
          img.src = '/images/productHeart/heart-off.png';  // 비활성 하트 이미지
        }
      });
    });
  });
</script>
</head>
<body>
	<!-- 헤더 -->
	<div th:insert="~{components/user/header :: header}"></div>
	<!-- 메인 콘텐츠 -->
	<main class="search-page-container_search">
		<div class="search-header_search">
			<div class="search-title_search">
				<!-- <i class="fa fa-search" aria-hidden="true"></i> -->
				<h1>
					<span th:text="${title}"></span> 검색결과
				</h1>
			</div>
			<p class="results-count_search">
				검색결과 <span  class="item-count-number" th:text="|${count}개|"></span>
			</p>
		</div>

		<!-- 검색 설정 패널 (상단) -->
		<div class="filter-panel_search">
			<div class="filter-section_search">
				<div class="filter-row_search price-filter_search">
					<label>가격</label>
					<div class="price-inputs_search">
						<input type="text" placeholder="최소 금액"> <span
							class="price-separator">-</span> <input type="text"
							placeholder="최대 금액">
					</div>
				</div>
				<div class="filter-row_search">
					<label>거래옵션</label>
					<div class="options_search">
						<label class="radio-option"> <input type="radio"
							name="trade-option" checked> <span class="checkmark"></span>
							전체
						</label> <label class="radio-option"> <input type="radio"
							name="trade-option"> <span class="checkmark"></span> 거래
							가능만 보기
						</label>
					</div>
				</div>
				<div class="filter-row_search">
					<label>정렬옵션</label>
					<div class="options_search sort-options">
						<label class="radio-option"> <input type="radio"
							name="sort-option" checked> <span class="checkmark"></span>
							추천순
						</label> <label class="radio-option"> <input type="radio"
							name="sort-option"> <span class="checkmark"></span> 최신순
						</label> <label class="radio-option"> <input type="radio"
							name="sort-option"> <span class="checkmark"></span> 낮은가격순
						</label> <label class="radio-option"> <input type="radio"
							name="sort-option"> <span class="checkmark"></span> 높은가격순
						</label>
					</div>
				</div>
			</div>
			<div class="filter-actions_search">
				<button class="reset-btn_search">초기화</button>
				<button class="apply-btn_search">적용</button>
			</div>
		</div>

		<!-- 상품 패널 (하단) -->
		<section class="results-grid_search">
			<div class="product-card_search" th:each="item : ${results}">
				<div class="product-image-wrapper">
					<!-- <img th:src="@{images/main/img1.png}" alt="Product Image"> -->
				</div>
				<div class="product-info_search">
					<p class="product-name_search" th:text="${item.title}">상품명</p>
					<p class="product-price_search" th:text="|${#numbers.formatDecimal(item.price, 0, 'COMMA', 0, 'POINT')}원|">가격</p>
					<p class="product-meta_search" th:text="${item.shortLocation} + ' · ' + ${#dates.format(item.inputDate, 'yyyy-MM-dd HH:mm')}">위치</p>
					<div class="product-meta-row">
					<div class="product-engagement_search">
						<i class="fa fa-eye"></i><span class="likes_search" th:text="${item.clickNum}"></span>
						<i class="fa fa-comment"></i><span class="chats_search" th:text="${item.catNum}"></span>
						<i class="fa fa-heart"></i><span class="chats_search" th:text="${item.likeNum}"></span>
					</div>
						<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
					</div>
				</div>
			</div>
		</section>
		  <!-- [디버그] 실제 넘어온 모델 값 확인 -->
  <div style="border:1px dashed red; padding:8px; margin-bottom:16px;">
    <p>catNum: <span th:text="${catNum}">null</span></p>
    <p>keyword: <span th:text="${keyword}">빈값</span></p>
    <p>title: <span th:text="${title}">빈값</span></p>
    <p>count: <span th:text="${count}">0</span></p>
  </div>
	</main>
	<!-- 푸터 -->
	<div th:insert="~{components/user/footer :: footer}"></div>
</body>
</html>
