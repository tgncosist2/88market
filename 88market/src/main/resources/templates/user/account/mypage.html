<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>88마켓 - 마이 페이지</title>
<!-- 마이페이지 CSS -->
<link rel="stylesheet" th:href="@{/css/user/mypage.css}">
<!-- 외부파일(jQuery, Font Awesome 등) -->
<th:block th:replace="~{components/user/external :: external}"></th:block>
<script>
	$(function() {

	});
</script>
</head>
<body>
	<!-- 헤더 -->
	<th:block th:insert="~{components/user/header :: header}"></th:block>
	
	<!-- 메인 콘텐츠 -->
	<main>
		<div class="main-container">
			<div class="main-content">
			<!-- 사이드바 -->	
			<th:block th:insert="~{fragments/user/user_sidebar :: sidebar(tab=${tab})}"></th:block>
			
        <section class="center-content">
		  <!-- sales -->
		  <th:block th:if="${tab=='sales'}">
		    <th:block th:replace="fragments/user/mypageList/sales :: mypageInfo"/>
		  </th:block>
		
		  <!-- purchase -->
		  <th:block th:if="${tab=='purchase'}">
		    <th:block th:replace="fragments/user/mypageList/purchase :: mypageInfo"/>
		  </th:block>
		
		  <!-- wishlist -->
		  <th:block th:if="${tab=='wishlist'}">
		    <th:block th:replace="fragments/user/mypageList/wishlist :: mypageInfo"/>
		  </th:block>
		
		  <!-- default -->
		  <th:block th:if="${tab!='sales' and tab!='purchase' and tab!='wishlist'}">
		    <th:block th:replace="fragments/user/mypageList/mypageMain :: mypageInfo"/>
		  </th:block>
        </section>
			</div>
		</div>
	</main>
		<script>
		  document.addEventListener('DOMContentLoaded', () => {
		    document.querySelectorAll('.product-tabs .tab-button').forEach(btn => {
		      btn.addEventListener('click', () => {
		        const prevTab    = document.querySelector('.product-tabs .tab-button.active');
		        const prevCont   = document.querySelector('.tab-content.active');
		        if (prevTab)  prevTab.classList.remove('active');
		        if (prevCont) prevCont.classList.remove('active');
		
		        btn.classList.add('active');
		        document.getElementById(btn.dataset.target).classList.add('active');
		      });
		    });
		  });
		</script>

	<script th:src="@{/js/mypage-tabs.js}"></script>
	<!-- 푸터 -->
	<th:block th:insert="~{components/user/footer :: footer}"></th:block>
</body>
</html>