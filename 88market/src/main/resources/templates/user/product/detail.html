<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>88마켓 - 상세정보</title>
<!-- 상품 상세 CSS -->
<link rel="stylesheet" th:href="@{/css/user/product_detail.css}">
<!-- 외부파일(jQuery, Font Awesome, 파비콘 등) -->
<th:block th:replace="~{components/user/external :: external}"></th:block>
<!-- Slick CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
<!-- Slick Theme (선택) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Slick JS -->
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
</head>
<script>
	$(function() {
		  $('.fade').slick({
			    dots: true,
			    infinite: true,
			    speed: 500,
			    fade: true,
			    cssEase: 'linear',
			    arrows: true,
			    prevArrow: '<button class="carousel-nav prev-btn">&lt;</button>',
			    nextArrow: '<button class="carousel-nav next-btn">&gt;</button>'
			  });
		 // 여기에 추가
		$('.card-list-wrapper-items').slick({
			infinite: true,
			slidesToShow: 5,
			slidesToScroll: 5,
			dots: false,
			arrows: true,
		});
});
</script>



<body>
	<!-- 헤더 -->
	<th:block th:insert="~{components/user/header :: header}"></th:block>
	
	<!-- 메인 콘텐츠 -->
	<main class="product-page-container">
		<div class="product-main-content">
			<!-- 왼쪽 영역: 상품 이미지 및 상세 설명 -->
			<section class="product-gallery-section">
				<!-- 메인 이미지 캐러셀 -->
				<div class="main-image-carousel fade" th:if="${image != null}">
				  <div th:if="${image.mainImage != null}">
				    <img th:src="@{${image.mainImage}}" alt="메인이미지">
				  </div>
				  <div th:if="${image.subImage1 != null}">
				    <img th:src="@{${image.subImage1}}" alt="서브1">
				  </div>
				  <div th:if="${image.subImage2 != null}">
				    <img th:src="@{${image.subImage2}}" alt="서브2">
				  </div>
				  <div th:if="${image.subImage3 != null}">
				    <img th:src="@{${image.subImage3}}" alt="서브3">
				  </div>
				  <div th:if="${image.subImage4 != null}">
				    <img th:src="@{${image.subImage4}}" alt="서브4">
				  </div>
				</div>

				<!-- 상품 정보 -->
				<div class="product-description">
					<h3>상품정보</h3>
					<p>불량 체크만 마친 미사용 개봉품입니다--- 궁금하신 점 문의 주세요---</p>
				</div>
			</section>

			<!-- 오른쪽 영역: 구매 정보 및 판매자 정보 -->
			<section class="product-purchase-section">
			<div class="purchase-core">
				<!-- 상품 기본 정보 -->
				<div class="product-summary">
					<span class="product-category">디지털기기</span>
					<div class="product-title-wrapper">
					  <h1><p th:text="${product.title}"></p></h1>
					</div>
					<div class="price-wrapper">
						<strong class="product-price" th:text="${product.price}">100,000원</strong> 
						<span class="badge safety-badge">안전거래</span>
					</div>
					<div class="product-meta">16분 전 · 조회 62회 · 채팅 3 · 찜 1</div>
				</div>

				<!-- 상품 거래 조건 -->
				<div class="transaction-specs">
					<div class="spec-item">
						<span class="spec-title">거래방식</span> 
						<span class="spec-value">직거래, 택배</span>
					</div>
					<div class="spec-item">
						<span class="spec-title">안전결제</span> 
						<span class="spec-value">사용</span>
					</div>
				</div>

				<!-- 행동 버튼 -->
				<div class="action-buttons">
					<button class="wish-btn-border">
						<img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" />
					</button>
					<button class="btn-chat">채팅하기</button>
					<button class="btn-buy" th:onclick="|location.href='@{/buy}'|">구매하기</button>
				</div>
				</div>

				<!-- 판매자 정보 -->
				<div class="seller-info">
					<h4>가게정보</h4>
					<div class="seller-profile">
						<div class="seller-name" th:onclick="|location.href='@{/seller?id=1}'|" style="cursor: pointer;">송민철영</div>
						<div class="trust-score">
							<span>신뢰지수 455</span>
							<div class="trust-gauge-bar">
								<div class="gauge" style="width: 75%;"></div>
							</div>
						</div>
					</div>
					<div class="seller-stats">
						<span>안전거래 <b>0</b></span> 
						<span>거래후기 <b>1</b></span>
					</div>

				</div>
				
					<!-- 판매자의 다른 상품 -->
					<h5>레이저키요...</h5>
					<div class="seller-other-item">
						<img th:src="@{/images/main/img2.png}" alt="판매자의 다른 상품">
						<div class="item-info">
							<p>레이저 키요 프로 웹캠 풀박</p>
							<strong>220,000원</strong> 
							<span class="badge safety-badge">안전거래</span>
						</div>
					</div>
			</section>
		</div>

		<!-- 추천 상품 섹션 -->
		<section class="related-products-section">
			<h2>이런 상품은 어때요?</h2>
			<div class="card-list-wrapper-items multiple-items">
				<!-- 관련 상품 카드 -->
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img3.png}" alt="RAZER 구현 편차계">
						</div>
						<div class="product-info">
							<p class="product-name">RAZER 구현 편차계</p>
							<strong class="product-price">15,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img4.png}" alt="레이저 오로치 v2 화이트">
						</div>
						<div class="product-info">
							<p class="product-name">레이저 오로치 v2 화이트</p>
							<strong class="product-price">20,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img3.png}" alt="RAZER 구현 편차계">
						</div>
						<div class="product-info">
							<p class="product-name">RAZER 구현 편차계</p>
							<strong class="product-price">15,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img4.png}" alt="레이저 오로치 v2 화이트">
						</div>
						<div class="product-info">
							<p class="product-name">레이저 오로치 v2 화이트</p>
							<strong class="product-price">20,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
								<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img3.png}" alt="RAZER 구현 편차계">
						</div>
						<div class="product-info">
							<p class="product-name">RAZER 구현 편차계</p>
							<strong class="product-price">15,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img4.png}" alt="레이저 오로치 v2 화이트">
						</div>
						<div class="product-info">
							<p class="product-name">레이저 오로치 v2 화이트</p>
							<strong class="product-price">20,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img3.png}" alt="RAZER 구현 편차계">
						</div>
						<div class="product-info">
							<p class="product-name">RAZER 구현 편차계</p>
							<strong class="product-price">15,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img4.png}" alt="레이저 오로치 v2 화이트">
						</div>
						<div class="product-info">
							<p class="product-name">레이저 오로치 v2 화이트</p>
							<strong class="product-price">20,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
								<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img3.png}" alt="RAZER 구현 편차계">
						</div>
						<div class="product-info">
							<p class="product-name">RAZER 구현 편차계</p>
							<strong class="product-price">15,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img4.png}" alt="레이저 오로치 v2 화이트">
						</div>
						<div class="product-info">
							<p class="product-name">레이저 오로치 v2 화이트</p>
							<strong class="product-price">20,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img3.png}" alt="RAZER 구현 편차계">
						</div>
						<div class="product-info">
							<p class="product-name">RAZER 구현 편차계</p>
							<strong class="product-price">15,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
				<div class="product-card">
					<a href="#">
						<div class="product-image-container">
							<img th:src="@{/images/main/img4.png}" alt="레이저 오로치 v2 화이트">
						</div>
						<div class="product-info">
							<p class="product-name">레이저 오로치 v2 화이트</p>
							<strong class="product-price">20,000원</strong>
						<div class="product-meta-row">
							<p class="product-meta">10분 전</p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      		</div>
						</div>
					</a>
				</div>
			</div>
		</section>
	</main>

	<!-- 푸터 -->
	<th:block th:insert="~{components/user/footer :: footer}"></th:block>
</body>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.wish-btn, .wish-btn-border').forEach(function (btn) {
      btn.addEventListener('click', function (event) {
        event.preventDefault();        // 링크 이동 막기
        event.stopPropagation();      // 상위 <a> 클릭 이벤트 막기

        // 하트 색 토글
        btn.classList.toggle('active');

        // btn 내부의 img 태그 찾기
        const img = btn.querySelector('img');
        if (btn.classList.contains('active')) {
          img.src = '/images/productHeart/heart-on.png';   // 활성 하트 이미지
        } else {
          img.src = '/images/productHeart/heart-off.png';  // 비활성 하트 이미지
        }
      });
    });
  });
</script>
</html>
