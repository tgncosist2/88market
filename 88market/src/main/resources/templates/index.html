<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>88마켓 - 당신이 찾는 중고거래 플랫폼</title>
<!-- 메인 CSS -->
<link rel="stylesheet" th:href="@{/css/user/main.css}">
<!-- 외부파일(jQuery, Font Awesome 등) -->
<th:block th:replace="~{components/user/external :: external}"></th:block>

<script>
$(function() {
	$('.autoplay').slick({
		slidesToShow: 3,
		slidesToScroll: 1,
		autoplay: true,
		autoplaySpeed: 2000,
		dots: true
	});

	  // 여기에 추가
 	  $('.top-like-slider').slick({
	    infinite: true,
	    slidesToShow: 5,
	    slidesToScroll: 5,
	    dots: true,
	    arrows: true,
	  }); 
	  
 	  $('.trend-slider').slick({
 		    infinite: true,
 		    slidesToShow: 5,
 		    slidesToScroll: 5,
 		    dots: true,
 		    arrows: true,
 		  });

 	  $('.view-slider').slick({
		    infinite: true,
		    slidesToShow: 5,
		    slidesToScroll: 5,
		    dots: true,
		    arrows: true,
		  });
	});		
</script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.wish-btn').forEach(function (btn) {
      btn.addEventListener('click', function (event) {
        event.preventDefault();        // 링크 이동 막기
        event.stopPropagation();      // 상위 <a> 클릭 이벤트 막기

        // 하트 색 토글
        btn.classList.toggle('active');

        // btn 내부의 img 태그 찾기
        const img = btn.querySelector('img');
        if (btn.classList.contains('active')) {
          img.src = '/images/productHeart/heart-on.png';   // 활성 하트 이미지
        } else {
          img.src = '/images/productHeart/heart-off.png';  // 비활성 하트 이미지
        }
      });
    });
  });
</script>
</head>
<body>
	
	<!-- 헤더 -->
	<th:block th:insert="~{components/user/header :: header}"></th:block>

	<!-- 메인 콘텐츠 -->
	<main class="page-container">
		<!-- 이벤트 배너 섹션 -->
		<section class="card-section event-section" >
			<div class="card-list-wrapper autoplay" style="height: 500px;">
				<div class="event-card" th:each="item : ${eventList}">
					<a th:href="@{/event/{evtNum}(evtNum=${item.evtNum})}"> <img th:src="${item.iDTO.subImage1}"
						alt="이벤트 배너 이미지">
					</a>
				</div>
			</div>
		</section>

		<!-- 찜이 많은 상품 섹션 -->
 		<section class="card-section">
			<h2 class="section-title">찜이 많은 상품</h2>
			<div class="card-list-wrapper-items top-like-slider">
			<div class="product-card" th:each="item :${topLike}">
			  <a th:href="@{/detail(id=${item.prdNum})}">
			    <div class="product-image-container" style="border: #FF0000 solid 1px">
			     <!--  <img th:src="@{/images/main/img5.png}" alt="닌텐도 스위치 타이틀"> -->
			    </div>
			    <div class="product-info">
			      <p class="product-name" th:text="${item.title}"></p>
			      <strong class="product-price" th:text="|${#numbers.formatDecimal(item.price, 0, 'COMMA', 0, 'POINT')}원|"></strong>
			      <div class="product-meta-row">
			       <p class="product-meta" th:text="${item.shortLocation} + ' · ' + ${#dates.format(item.inputDate, 'yyyy-MM-dd HH:mm')}"></p>
			        <button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon"/></button>
			      </div>
			    </div>
			  </a>
			</div>
			</div>
		</section>
		<!-- 다른 사람들은 이 키워드를 주목하고 있어요 -->
		<section class="card-section">
			<h2 class="section-title">
				다른 사람들은 이 키워드를 주목하고 있어요 <span class="text-highlight"  th:text="${trendCategory}"></span>
			</h2>
			<div class="card-list-wrapper-items trend-slider">
				<div class="product-card" th:each="item : ${trendItems}">
					<a th:href="@{/detail(id=${item.prdNum})}">
						<div class="product-image-container">
							<!-- <img th:src="@{/images/main/img1.png}" alt="댄스 노란모자"> -->
						</div>
						<div class="product-info">
							<p class="product-name" th:text="${item.title}"></p>
							<strong class="product-price" th:text="|${#numbers.formatDecimal(item.price,0,'COMMA',0,'POINT')}원|"></strong>
						<div class="product-meta-row">
							<p class="product-meta" th:text="${item.shortLocation} + ' · ' + ${#dates.format(item.inputDate, 'yyyy-MM-dd HH:mm')}"></p>
							<button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon"/></button>
			      		</div>
						</div>
					</a>
				</div>
			</div>
		</section>

		<!-- 많이 본 상품 섹션 -->
		<section class="card-section">
			<h2 class="section-title">많이 본 상품</h2>
			<div class="card-list-wrapper-items view-slider">
				<div class="product-card" th:each="item : ${topView}">
			  <a th:href="@{/detail(id=${item.prdNum})}">
			    <div class="product-image-container">
			      <!-- <img th:src="@{/images/main/img5.png}" alt="닌텐도 스위치 타이틀"> -->
			    </div>
			    <div class="product-info">
			      <p class="product-name" th:text="${item.title}"></p>
			      <strong class="product-price" th:text="|${#numbers.formatDecimal(item.price, 0, 'COMMA', 0, 'POINT')}원|"></strong>
			      <div class="product-meta-row">
			        <p class="product-meta" th:text="${item.shortLocation} + ' · ' + ${#dates.format(item.inputDate, 'yyyy-MM-dd HH:mm')}"></p>
<!-- 			        <p class="product-meta" th:text="|${item.location1}·${#dates.format(item.inputDate, 'yyyy-MM-dd HH:mm')}|"></p> -->
			        <button class="wish-btn"><img th:src="@{/images/productHeart/heart-off.png}" alt="찜하기" class="heart-icon" /></button>
			      </div>
			    </div>
			  </a>
				</div>
			</div>
		</section>

	</main>
	<!-- 푸터 -->
	<th:block th:insert="~{components/user/footer :: footer}"></th:block>
</body>
</html>