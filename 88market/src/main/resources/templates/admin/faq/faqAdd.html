<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>관리자 - FAQ</title>

<!-- 사이드바 CSS -->
<link rel="stylesheet" th:href="@{/css/admin/style.css}">
<!-- 페이지 타이틀 CSS -->
<link rel="stylesheet" th:href="@{/css/admin/pageTitle.css}">

<!-- 관리자 공지사항 CSS -->
<link rel="stylesheet" th:href="@{/css/admin/faq/faq.css}">
<!-- 외부파일(jQuery, Font Awesome, favicon 등) -->
<th:block th:replace="~{components/admin/external :: external}"></th:block>
</head>

<body>
	<!-- 고정 사이드바 -->
	<div th:replace="~{fragments/admin/admin_sidebar :: sidebar}"></div>
	<!-- 상단 헤더 -->
	<div th:replace="~{fragments/admin/admin_header :: header}"></div>

	<div class="admin-wrapper">
		<div class="main-content">
			<!-- 헤더 -->
			<th:block th:replace="~{fragments/admin/admin_pageTitle :: pageTitle('FAQ','등록')}" />

			<!-- 메인 컨텐츠 (공지사항 관리) -->
			<main class="container">
				<section class="faq-form-section">
					<form id="faqForm" th:action="@{/admin/faq/add}" method="post">
						<div class="form-group">
							<label for="title" class="form-label">제목</label>
							<div class="title-input-group">
								<select class="form-select" id="category" name="faqType"
									required>
									<option value="기타">선택</option>
									<option value="거래문의">거래문의</option>
									<option value="이용문의">이용문의</option>
									<option value="회원/계정">회원/계정</option>
									<option value="운영정책">운영정책</option>
									<option value="기타">기타</option>
								</select> <input type="text" class="form-input title-input" id="title"
									name="title" placeholder="FAQ 제목을 입력하세요" required>
							</div>
						</div>

						<div class="form-group">
							<label for="content" class="form-label">내용</label>
							<textarea id="content" name="content" class="summernote-editor"></textarea>
						</div>

						<div class="form-actions">
							<button type="button" class="action-button cancel-btn"
								onclick="history.back()">취소</button>
							<button type="button" class="action-button submit-btn"
								id="submitBtn">등록</button>
						</div>
					</form>
				</section>
			</main>
			<!-- 필요하다면 하단 스크립트 -->
			<script src="/js/admin/script.js" defer></script>
		</div>
	</div>
	<script>
		$(function() {
			// Summernote 초기화
			$('#content').summernote(
					{
						height : 350,
						minHeight : 200,
						maxHeight : 600,
						lang : 'ko-KR',
						toolbar : [ [ 'style', [ 'style' ] ],
								[ 'font', [ 'bold', 'underline', 'clear' ] ],
								[ 'fontname', [ 'fontname' ] ],
								[ 'fontsize', [ 'fontsize' ] ],
								[ 'color', [ 'color' ] ],
								[ 'para', [ 'ul', 'ol', 'paragraph' ] ],
								[ 'table', [ 'table' ] ],
								[ 'insert', [ 'link', 'picture' ] ],
								[ 'view', [ 'fullscreen', 'codeview' ] ] ],
						callbacks : {
							onInit : function() {
								// DOM이 완전히 로드된 후 실행
								setTimeout(function() {
									$('.note-editable').css('text-align',
											'center');
								}, 100);
							}
						}
					});

			// 폼 제출 시 유효성 검사
			$('#faqForm').on('submit', function(e) {
				const title = $('#title').val().trim();
				const content = $('#content').summernote('isEmpty');

				if (!title) {
					alert('제목을 입력해주세요.');
					$('#title').focus();
					e.preventDefault();
					return false;
				}

				if (content) {
					alert('내용을 입력해주세요.');
					$('#content').summernote('focus');
					e.preventDefault();
					return false;
				}
			});

			$('#submitBtn').click(function() {
				// 유효성 검사
				if ($('#title').val() == '') {
					alert('제목을 입력해주세요.');
					$('#title').focus();
					return false;
				}
				if ($('#content').summernote('isEmpty')) {
					alert('내용을 입력해주세요.');
					$('#content').summernote('focus');
					return false;
				}

				// 폼 제출
				$('#faqForm').submit();
			});
		});// ready
	</script>
</body>

</html>