<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>관리자 - 주문 관리</title>
<!-- 사이드바 CSS -->
<link rel="stylesheet" th:href="@{/css/admin/style.css}">
<!-- 페이지 타이틀 CSS -->
<link rel="stylesheet" th:href="@{/css/admin/pageTitle.css}">

<link rel="stylesheet" th:href="@{/css/admin/notice/notice.css}">
<!-- 외부파일(jQuery, Font Awesome, favicon 등) -->
<th:block th:replace="~{components/admin/external :: external}"></th:block>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>관리자 - 주문관리</title>
  <link rel="stylesheet" th:href="@{/css/admin/notice/notice.css}">
  <th:block th:replace="~{components/admin/external :: external}"></th:block>
  
</head>

<body>
  <div th:replace="~{fragments/admin/admin_sidebar :: sidebar}"></div>
	<!-- 상단 헤더 -->
	<div th:replace="~{fragments/admin/admin_header :: header}"></div>
	
	<div class="admin-wrapper">
		<div class="main-content">
		    <!-- 페이지 타이틀 -->
		    <th:block th:replace="~{fragments/admin/admin_pageTitle :: pageTitle('기업관 관리','주문 관리')}" />
		    
      <main class="container">
        <section class="search-section">
          <form id="searchForm" th:action="@{/admin/planing/planingOrderList}" method="get">
            <div class="search-box">
              <input type="text" class="search-input" name="keyword"
                th:value="${param.keyword}" placeholder="상품명 검색">

              <!-- 거래상태 드롭다운 -->
              <select name="tradeStatus" class="search-select">
                <option value="all" th:selected="${param.tradeStatus == 'all'}">전체</option>
                <option th:value="결제완료" th:selected="${param.tradeStatus == '결제완료'}">결제완료</option>
				<option th:value="상품준비중" th:selected="${param.tradeStatus == '상품 준비중'}">상품 준비중</option>
				<option th:value="배송중" th:selected="${param.tradeStatus == '배송중'}">배송중</option>
				<option th:value="배송완료" th:selected="${param.tradeStatus == '배송완료'}">배송완료</option>
				<option th:value="구매확정" th:selected="${param.tradeStatus == '구매확정'}">구매확정</option>
              </select>

              <button type="submit" class="search-button">검색</button>
              <button type="button" class="search-button" id="resetSearch">초기화</button>
            </div>
          </form>
        </section>

        <section class="notice-section">
          <table class="notice-table">
            <thead>
              <tr>
                <th>주문번호</th>
                <th>상품명</th>
                <th>브랜드</th>
                <th>구매자</th>
                <th>거래상태</th>
                <th>주문일자</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="item : ${orderList}" class="table-row">
                <td th:text="${item.orderNumber}"></td>
                <td class="notice-title" th:text="${item.productName}"
                    style="cursor: pointer; text-align: center;"
                    th:onclick="|location.href='@{/admin/planing/planingOrderDetail(tradeId=${item.tradeId})}'|">
                </td>
                <td th:text="${item.brandName}"></td>
                <td th:text="${item.buyerName}"></td>
                <td th:text="${item.tradeStatus}"></td>
                <td th:text="${item.orderDate}"></td>
              </tr>
              <tr th:if="${#lists.isEmpty(orderList)}">
                <td colspan="6" style="text-align: center;">등록된 주문이 없습니다.</td>
              </tr>
            </tbody>
          </table>

          <div class="table-footer">

            <div class="pagination" th:if="${pagination.totalPages > 1}">
              <a th:if="${pagination.pageNum > 1}"
                 th:href="@{/admin/planing/planingOrderList(page=${pagination.pageNum - 1}, keyword=${param.keyword}, tradeStatus=${param.tradeStatus})}"
                 class="prev">&lt;</a>

              <a th:each="i : ${#numbers.sequence(1, pagination.totalPages)}"
                 th:href="@{/admin/planing/planingOrderList(page=${i}, keyword=${param.keyword}, tradeStatus=${param.tradeStatus})}"
                 th:classappend="${i == pagination.pageNum} ? 'active' : ''"
                 th:text="${i}"></a>

              <a th:if="${pagination.pageNum < pagination.totalPages}"
                 th:href="@{/admin/planing/planingOrderList(page=${pagination.pageNum + 1}, keyword=${param.keyword}, tradeStatus=${param.tradeStatus})}"
                 class="next">&gt;</a>
            </div>
          </div>
        </section>
      </main>
      <script src="/js/admin/script.js" defer></script>
    </div>
  </div>

  <script>
    document.getElementById('resetSearch').addEventListener('click', function () {
      window.location.href = '/admin/planing/planingOrderList';
    });
  </script>
</body>
</html>
