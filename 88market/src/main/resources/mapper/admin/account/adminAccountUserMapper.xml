<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.sist.admin.DAO.AdminAccountUserDAO">

	<resultMap id="userMap" type="kr.co.sist.DTO.UserDTO">
  		<id   column="USER_NUM"       property="userNum"/>
  		<result column="NICKNAME"      property="nickname"/>
  		<result column="total_report"  property="totalReport"/>
  		<result column="BANTYPE"       property="banType"/>
  		<result column="WITHDRAW"      property="withdraw"/>
  		<result column="INPUT_DATE"    property="inputDate"/>
	</resultMap>
	
    <select id="selectUserList" resultMap="userMap">
	SELECT
		u.USER_NUM AS USER_NUM,
		u.NICKNAME AS NICKNAME,
		COUNT(r.REP_NUM) AS total_report,
		u.BANTYPE AS BANTYPE,
		u.WITHDRAW AS WITHDRAW,
		u.INPUT_DATE AS INPUT_DATE
	FROM USERS u
	LEFT JOIN REPORT r
		ON u.USER_NUM = r.USER_NUM
	GROUP BY
		u.USER_NUM,
		u.NICKNAME,
		u.BANTYPE,
		u.WITHDRAW,
		u.INPUT_DATE
	ORDER BY u.USER_NUM
	</select>
    
</mapper>
